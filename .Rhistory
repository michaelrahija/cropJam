install.packages(c("dplyr", "XLConnect","tidyr","rvest","foreign"))
if(sys[5] == "x86_64"){
dir = "~/Dropbox/monitorFrame" #Mac
res.dir = "T:/Team_working_folder/G/11. Research/"
ta.dir = "T:/Team_working_folder/G/13.Training/"
tr.dir = "T:/Team_working_folder/G/12.Technical Assistance/"
} else if (sys[5] == "Michael"){
dir = "C:/Users/Michael/Dropbox/monitorFrame"#HOME PC
res.dir = "T:/Team_working_folder/G/11. Research/"
} else if (sys[6]=="Rahija") {
dir = "C:/Users/rahija/Dropbox/monitorFrame" #FAO PC
res.dir = "T:/Team_working_folder/G/11. Research/"
ta.dir = "T:/Team_working_folder/G/13.Training/"
tr.dir = "T:/Team_working_folder/G/12.Technical Assistance/"
} else {
stop("Implement location for current user!")
}
sys <- Sys.info()
if(sys[5] == "x86_64"){
dir = "~/Dropbox/monitorFrame" #Mac
res.dir = "T:/Team_working_folder/G/11. Research/"
ta.dir = "T:/Team_working_folder/G/13.Training/"
tr.dir = "T:/Team_working_folder/G/12.Technical Assistance/"
} else if (sys[5] == "Michael"){
dir = "C:/Users/Michael/Dropbox/monitorFrame"#HOME PC
res.dir = "T:/Team_working_folder/G/11. Research/"
} else if (sys[6]=="Rahija") {
dir = "C:/Users/rahija/Dropbox/monitorFrame" #FAO PC
res.dir = "T:/Team_working_folder/G/11. Research/"
ta.dir = "T:/Team_working_folder/G/13.Training/"
tr.dir = "T:/Team_working_folder/G/12.Technical Assistance/"
} else {
stop("Implement location for current user!")
}
tr.dir
list.files(path)
list.files(tr.dir)
sys <- Sys.info()
if(sys[5] == "x86_64"){
dir = "~/Dropbox/monitorFrame" #Mac
res.dir = "T:/Team_working_folder/G/11. Research/"
ta.dir = "T:/Team_working_folder/G/13.Training/"
tr.dir = "T:/Team_working_folder/G/12. Technical Assistance/"
} else if (sys[5] == "Michael"){
dir = "C:/Users/Michael/Dropbox/monitorFrame"#HOME PC
res.dir = "T:/Team_working_folder/G/11. Research/"
} else if (sys[6]=="Rahija") {
dir = "C:/Users/rahija/Dropbox/monitorFrame" #FAO PC
res.dir = "T:/Team_working_folder/G/11. Research/"
ta.dir = "T:/Team_working_folder/G/13.Training/"
tr.dir = "T:/Team_working_folder/G/12. Technical Assistance/"
} else {
stop("Implement location for current user!")
}
list.files(tr.dir)
list.files(tr.dir[1])
list.files(tr.dir[[1]])
lsx")
path = paste0(ta.dir,"00-SPAR-1-SPARS/Monitoring_notebook.xlsx")
path
overview <- fetch_overview(path = path)
#Source required functions
files = dir(path = paste0(dir, "/R"), full.names = TRUE)
sapply(files, source)
overview <- fetch_overview(path = path)
path = paste0(ta.dir,"00-SPAR-1-SPARS/Monitoring_notebook.xlsx")
overview <- fetch_overview(path = path)
ta.dir
tr.dir
path = paste0(ta.dir,"00-SPAR-1-SPARS/Monitoring_notebook.xlsx")
path
install.packages("DT")
library(DT)
library(dplyr)
library(xlsx)
library(tidyr)
library(ggplot2)
library(RColorBrewer)
library(data.table)
library(maps)
library(countrycode)
library(scales)
install.packages(c("xlsx","ggplot2", "RColorBrewer", "data.table","maps","countrycode", "scales"))
install.packages("installr") # install
setInternet2(TRUE)
installr::updateR()
x <- function(x) x+1
View(x)
View(x)
View(x)
View(x)
library(data.table)
library(dplyr)
library(rvest)
#library(romeHousePrices)
if(Sys.info()[4] == "JOSH_LAPTOP"){
workingDir = "~/GitHub/romeHousePrices"
savingDir = "~/../Dropbox/romeHouseData/"
} else if(Sys.info()[4] == "joshuaUbuntuLinux"){
workingDir = "~/Documents/Github/romeHousePrices"
} else if(Sys.info()[4] =="Michaels-MacBook-Pro-2.local"|
Sys.info()[4] == "Michaels-MBP-2.lan"){
workingDir = "~/Dropbox/romeHousePrices/"
savingDir = "~/DropBox/romeHouseData/" #for michael's mac yo
} else {
stop("No directory for current user!")
}
setwd(workingDir)
files = dir(path = paste0(workingDir, "/R"), full.names = TRUE)
sapply(files, source)
#mark time start script for saving datasets
time = gsub("(-|:| )", "\\.", Sys.time())
knitr::opts_chunk$set(echo = TRUE)
# tabulate listing data
library(memisc)
library(dplyr)
library(reshape)
setwd("~/Dropbox/CROP/Jamaica/cropJam")
setwd("C:/Users/Rahija/Dropbox/CROP/Jamaica/cropJam")
setwd("C:/Users/Rahija/Dropbox/CROP/Jamaica/cropJam")
data.dir <- "C:/Users/Rahija/Dropbox/CROP/Jamaica/area_listing"
list.files(data.dir)
data.dir <- "C:/Users/Rahija/Dropbox/CROP/Jamaica/area_listing/"
data.dir <- "C:/Users/Rahija/Dropbox/CROP/Jamaica/area_listing/"
list.files(data.dir)
data.dir
data.dir <- "C:/Users/Rahija/Dropbox/CROP/Jamaica/data_area/"
list.files(data.dir)
list.files(data.dir, pattern = ".tab")
top <- read.table(paste0(data.dir,list.files[[1]]),
header = TRUE,
sep = "\t")
paste0(data.dir,list.files[[1]])
data.files <- list.files(data.dir, pattern = ".tab")
data.files <- list.files(data.dir, pattern = ".tab")
top <- read.table(paste0(data.dir,data.files[[1]]),
header = TRUE,
sep = "\t")
top <- read.delim(paste0(data.dir,data.files[[1]]),
header = TRUE,
sep = "\t")
colnames(top)
parcel <- read.delim(paste0(data.dir,data.files[[12]]),
header = TRUE,
sep = "\t")
parcel <- read.delim(paste0(data.dir,data.files[[12]]),
header = TRUE,
sep = "\t")
data.files[[12]]
data.files
parcel <- read.delim(paste0(data.dir,data.files[[7]]),
header = TRUE,
sep = "\t")
colnames(parcel)
crop <- read.delim(paste0(data.dir,data.files[[2]]),
header = TRUE,
sep = "\t")
head(crop)
table(crop$harvest_date_current_3)
head(crop)
write.csv(crop, file.name = "crop_harvest.csv")
write.csv(crop, file = "crop_harvest.csv")
temp <- filter(crop, harvest_date_current > as.POSIXct("1/6/201612:00:00 AM"))
temp <- filter(crop, harvest_date_current_3 > as.POSIXct("1/6/201612:00:00 AM"))
temp
class(crop$harvest_date_current_3)
crop$harvest_date_current_3 <- as.POSIXct.date(crop$harvest_date_current_3)
?as.POSIXct
crop$harvest_date_current_3 <- as.Date(crop$harvest_date_current_3, format = "%m/%d/Y")
tail(crop)
crop <- read.delim(paste0(data.dir,data.files[[2]]),
header = TRUE,
sep = "\t")
head(crop)
class(crop$harvest_date_current_3)
temp<- as.Date(crop$harvest_date_current_3, format = "%m/%d/%Y %H:%M:%S")
temp
tail(crop)
filter(crop, harvest_date_current_3 > as.Date("1/6/2016 12:00:00 AM"))
crop$harvest_date_current_3 <- as.Date(crop$harvest_date_current_3, format = "%m/%d/%Y %H:%M:%S")
crop$harvest_date_current_3
class(crop$harvest_date_current_3)
temp <- subset(crop, harvest_date_current_3 > as.Date("2016-06-01"))
temp
temp <- subset(temp, harvest_date_current_3 < as.Date("2016-08-01"))
temp
nrow(temp)
tab <- unique(temp$ParentId1,temp$ParentId2)
tab
data.files
parcel <- read.delim(paste0(data.dir,data.files[[1]]),
header = TRUE,
sep = "\t")
head(parcel)
colname(parcel)[1] <- "parcel_id"
colnames(parcel)[1] <- "parcel_id"
colnames(parcel)
farmer <- read.delim(paste0(data.dir,data.files[[1]]),
header = TRUE,
sep = "\t")
colnames(farmer)[1] <- "parcel_id"
head(farmer)
parcel <- farmer <- read.delim(paste0(data.dir,data.files[[7]]),
header = TRUE,
sep = "\t")
head(parcel)
colnames(parcel)[1] <- "parcel_id"
data.files <- list.files(data.dir, pattern = ".tab")
farmer <- read.delim(paste0(data.dir,data.files[[1]]),
header = TRUE,
sep = "\t")
colnames(farmer)[1] <- "parcel_id"
parcel <- farmer <- read.delim(paste0(data.dir,data.files[[7]]),
header = TRUE,
sep = "\t")
colnames(parcel)[length(colnames(parcel))] <- "parcel_id"
head(parcel)
master <- merge(farmer, parcel, by = "parcel_id")
colnames(farmer)
farmer <- read.delim(paste0(data.dir,data.files[[1]]),
header = TRUE,
sep = "\t")
colnames(farmer)[1] <- "parcel_id"
data.files <- list.files(data.dir, pattern = ".tab")
farmer <- read.delim(paste0(data.dir,data.files[[1]]),
header = TRUE,
sep = "\t")
colnames(farmer)[1] <- "parcel_id"
parcel <- read.delim(paste0(data.dir,data.files[[7]]),
header = TRUE,
sep = "\t")
colnames(parcel)[length(colnames(parcel))] <- "parcel_id"
head(parcel)
head(farmer)
master <- merge(farmer, parcel, by = "parcel_id")
head(master)
farmer <- read.delim(paste0(data.dir,data.files[[1]]),
header = TRUE,
sep = "\t")
colnames(farmer)[1] <- "farm_id"
parcel <- read.delim(paste0(data.dir,data.files[[7]]),
header = TRUE,
sep = "\t")
colnames(parcel)[length(colnames(parcel))] <- "farm_id"
colnames(parcel)[1] <- "parcel_id"
head(farm)
head(farmer)
head(parcel)
master <- merge(farmer, parcel, by = "farm_id")
head(master)
crop <- read.delim(paste0(data.dir,data.files[[2]]),
header = TRUE,
sep = "\t")
head(crop)
colnames(crop)[length(colnames(parcel))] <- "farm_id"
colnames(crop)[length(colnames(crop))] <- "farm_id"
colnames(crop)[length(colnames(crop))-1] <- "parcel_id"
data.files <- list.files(data.dir, pattern = ".tab")
farmer <- read.delim(paste0(data.dir,data.files[[1]]),
header = TRUE,
sep = "\t")
colnames(farmer)[1] <- "farm_id"
parcel <- read.delim(paste0(data.dir,data.files[[7]]),
header = TRUE,
sep = "\t")
colnames(parcel)[length(colnames(parcel))] <- "farm_id"
colnames(parcel)[1] <- "parcel_id"
master <- merge(farmer, parcel, by = "farm_id")
crop <- read.delim(paste0(data.dir,data.files[[2]]),
header = TRUE,
sep = "\t")
colnames(crop)[1] <- "crop_id"
colnames(crop)[length(colnames(crop))] <- "farm_id"
colnames(crop)[length(colnames(crop))-1] <- "parcel_id"
master <- merge(master, crop, by = c("farm_id", "parcel_id"))
head(master)
master <- arrange(master, farm_id, parcel_id)
head(master)
master <- arrange(master, farm_id, parcel_id, crop_id)
setwd("C:/Users/Rahija/Dropbox/CROP/Jamaica/cropJam")
data.dir <- "C:/Users/Rahija/Dropbox/CROP/Jamaica/data_area/"
data.files <- list.files(data.dir, pattern = ".tab")
farmer <- read.delim(paste0(data.dir,data.files[[1]]),
header = TRUE,
sep = "\t")
colnames(farmer)[1] <- "farm_id"
parcel <- read.delim(paste0(data.dir,data.files[[7]]),
header = TRUE,
sep = "\t")
colnames(parcel)[length(colnames(parcel))] <- "farm_id"
colnames(parcel)[1] <- "parcel_id"
master <- merge(farmer, parcel, by = "farm_id")
crop <- read.delim(paste0(data.dir,data.files[[2]]),
header = TRUE,
sep = "\t")
colnames(crop)[1] <- "crop_id"
colnames(crop)[length(colnames(crop))] <- "farm_id"
colnames(crop)[length(colnames(crop))-1] <- "parcel_id"
master <- merge(master, crop, by = c("farm_id", "parcel_id"))
master <- arrange(master, farm_id, parcel_id, crop_id)
head(master)
data.files
rvest dates, and count parcels
master <- select(master,
Farmer_name_3,
farm_id,
parcel_id,
Parcel_ID_3,
crop_id,
harvest_date_current_3
)
head(master)
?sample
?head
knitr::kable(head(master, n = 10))
knitr::kable(head(master[-3,], n = 10))
knitr::kable(head(master[,-3], n = 10))
master$harvest_date_current_3 <- as.Date(master$harvest_date_current_3, format = "%m/%d/%Y %H:%M:%S")
temp <- subset(master, harvest_date_current_3 > as.Date("2016-06-01"))
temp <- subset(master, harvest_date_current_3 < as.Date("2016-08-01"))
temp
nrow(temp)
head(master)
# tabulate listing data
library(memisc)
library(dplyr)
library(reshape)
```
# Overview of listing data collected
## Number of listed farmers, and parcels by EA
```{r, echo = FALSE}
#set wd
setwd("C:/Users/Rahija/Dropbox/CROP/Jamaica/cropJam")
data.dir <- "C:/Users/Rahija/Dropbox/CROP/Jamaica/data_area/"
#grab list of files
data.files <- list.files(data.dir, pattern = ".tab")
#read in files in order, and merge
farmer <- read.delim(paste0(data.dir,data.files[[1]]),
header = TRUE,
sep = "\t")
colnames(farmer)[1] <- "farm_id"
parcel <- read.delim(paste0(data.dir,data.files[[7]]),
header = TRUE,
sep = "\t")
colnames(parcel)[length(colnames(parcel))] <- "farm_id"
colnames(parcel)[1] <- "parcel_id"
master <- merge(farmer, parcel, by = "farm_id")
crop <- read.delim(paste0(data.dir,data.files[[2]]),
header = TRUE,
sep = "\t")
colnames(crop)[1] <- "crop_id"
colnames(crop)[length(colnames(crop))] <- "farm_id"
colnames(crop)[length(colnames(crop))-1] <- "parcel_id"
master <- merge(master, crop, by = c("farm_id", "parcel_id"))
master <- arrange(master, farm_id, parcel_id, crop_id)
#keep only relevant column to filter harvest dates, and count parcels
master <- select(master,
Farmer_name_3,
farm_id,
parcel_id,
Parcel_ID_3,
crop_id,
harvest_date_current_3
)
#show what the data looks like
knitr::kable(head(master[], n = 10))
head(master)
master$harvest_date_current_3 <- as.Date(master$harvest_date_current_3, format = "%m/%d/%Y %H:%M:%S")
head(master)
temp <- subset(master, harvest_date_current_3 > as.Date("2016-06-01"))
temp <- subset(master, harvest_date_current_3 < as.Date("2016-08-01"))
nrow(temp)
# Overview of listing data collected
## Number of listed farmers, and parcels by EA
```{r, echo = FALSE}
#set wd
setwd("C:/Users/Rahija/Dropbox/CROP/Jamaica/cropJam")
data.dir <- "C:/Users/Rahija/Dropbox/CROP/Jamaica/data_area/"
#grab list of files
data.files <- list.files(data.dir, pattern = ".tab")
#read in files in order, and merge
farmer <- read.delim(paste0(data.dir,data.files[[1]]),
header = TRUE,
sep = "\t")
colnames(farmer)[1] <- "farm_id"
parcel <- read.delim(paste0(data.dir,data.files[[7]]),
header = TRUE,
sep = "\t")
colnames(parcel)[length(colnames(parcel))] <- "farm_id"
colnames(parcel)[1] <- "parcel_id"
master <- merge(farmer, parcel, by = "farm_id")
crop <- read.delim(paste0(data.dir,data.files[[2]]),
header = TRUE,
sep = "\t")
colnames(crop)[1] <- "crop_id"
colnames(crop)[length(colnames(crop))] <- "farm_id"
colnames(crop)[length(colnames(crop))-1] <- "parcel_id"
master <- merge(master, crop, by = c("farm_id", "parcel_id"))
master <- arrange(master, farm_id, parcel_id, crop_id)
#keep only relevant column to filter harvest dates, and count parcels
master <- select(master,
Farmer_name_3,
farm_id,
parcel_id,
Parcel_ID_3,
crop_id,
harvest_date_current_3
)
master$harvest_date_current_3 <- as.Date(master$harvest_date_current_3, format = "%m/%d/%Y %H:%M:%S")
temp <- subset(master, harvest_date_current_3 > as.Date("2016-06-01"))
temp <- subset(temp, harvest_date_current_3 < as.Date("2016-08-01"))
nrow(temp)
temp
temp <- arrange(temp, Farmer_name_3, farm_id, parcel_id,
Parcel_ID_3,crop_id,harvest_date_current_3)
colnames(temp)
temp[,c(1,3,4,5,6)]
setwd("C:/Users/Rahija/Dropbox/CROP/Jamaica/cropJam")
data.dir <- "C:/Users/Rahija/Dropbox/CROP/Jamaica/data_area/"
#grab list of files
data.files <- list.files(data.dir, pattern = ".tab")
#read in files in order, and merge
farmer <- read.delim(paste0(data.dir,data.files[[1]]),
header = TRUE,
sep = "\t")
colnames(farmer)[1] <- "farm_id"
parcel <- read.delim(paste0(data.dir,data.files[[7]]),
header = TRUE,
sep = "\t")
colnames(parcel)[length(colnames(parcel))] <- "farm_id"
colnames(parcel)[1] <- "parcel_id"
master <- merge(farmer, parcel, by = "farm_id")
crop <- read.delim(paste0(data.dir,data.files[[2]]),
header = TRUE,
sep = "\t")
colnames(crop)[1] <- "crop_id"
colnames(crop)[length(colnames(crop))] <- "farm_id"
colnames(crop)[length(colnames(crop))-1] <- "parcel_id"
master <- merge(master, crop, by = c("farm_id", "parcel_id"))
master <- arrange(master, farm_id, parcel_id, crop_id)
#keep only relevant column to filter harvest dates, and count parcels
master <- select(master,
Farmer_name_3,
farm_id,
parcel_id,
Parcel_ID_3,
crop_id,
harvest_date_current_3
)
#show what the data looks like
knitr::kable(head(master[], n = 10))
#convert harvest date to computer readable for filtering
master$harvest_date_current_3 <- as.Date(master$harvest_date_current_3, format = "%m/%d/%Y %H:%M:%S")
temp <- subset(master, harvest_date_current_3 > as.Date("2016-06-01"))
temp <- subset(temp, harvest_date_current_3 < as.Date("2016-08-01"))
temp <- arrange(temp, Farmer_name_3, farm_id, parcel_id,
Parcel_ID_3,crop_id,harvest_date_current_3)
colnames(crop)
master$harvest_date_current_3 <- as.Date(master$harvest_date_current_3, format = "%m/%d/%Y %H:%M:%S")
temp <- subset(master, harvest_date_current_3 > as.Date("2016-06-01"))
temp <- subset(temp, harvest_date_current_3 < as.Date("2016-08-01"))
select(temp, farm_id, parcel_id, harvest_date_current_3)
to.count <- select(temp, farm_id, parcel_id, harvest_date_current_3)
to.count <- select(temp, farm_id, parcel_id)
to.count
nrows(to.count)
nrow(to.count)
unique(to.count)
length(unique(to.count))
duplicate(to.count[,1], to.count[,2])
duplicated(to.count[,1], to.count[,2])
nrow(to.count)
nrow(unique(to.count))
